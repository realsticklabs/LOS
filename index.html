<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload EXE Files</title>
    <link href="https://unpkg.com/filepond/dist/filepond.css" rel="stylesheet" />
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f4f4f4;
            font-family: Arial, sans-serif;
        }
        h1 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Drag and Drop Your EXE</h1>
    <input type="file" class="filepond" name="filepond" id="filepond" multiple />
    <p id="status"></p>

    <script src="https://unpkg.com/filepond/dist/filepond.js"></script>
    <script>
        // Register FilePond plugins (if needed)
        // FilePond.registerPlugin(FilePondPluginFileValidateType);

        // Create a FilePond instance
        const inputElement = document.querySelector('#filepond');
        const pond = FilePond.create(inputElement);

        // Set accepted file types to .exe
        FilePond.setOptions({
            acceptedFileTypes: ['application/x-msdownload', 'application/octet-stream'],
            server: {
                process: (fieldName, file, metadata) => {
                    // Handle file upload here, e.g., send to server
                    console.log('Uploading:', file.name);
                    return new Promise((resolve, reject) => {
                        // Replace with your server endpoint
                        const url = '/upload'; // Example endpoint

                        const formData = new FormData();
                        formData.append(fieldName, file, file.name);

                        fetch(url, {
                            method: 'POST',
                            body: formData,
                        })
                        .then(response => {
                            if (response.ok) {
                                resolve();
                            } else {
                                reject('Upload failed.');
                            }
                        })
                        .catch(err => {
                            reject(err);
                        });
                    });
                },
                revert: (uniqueFileId) => {
                    // Handle file removal here, if necessary
                },
            },
        });

        // Display upload status
        pond.onprocessfile = (error, file) => {
            if (error) {
                document.getElementById('status').textContent = 'Error uploading file.';
            } else {
                document.getElementById('status').textContent = 'File uploaded successfully: ' + file.filename;
            }
        };
    </script>
</body>
</html>
